<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculateur CELI 2025-2026</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        @font-face {
            font-family: 'FKGroteskNeue';
            src: url('https://r2cdn.perplexity.ai/fonts/FKGroteskNeue.woff2') format('woff2');
        }

        :root {
            --color-background:   #ffffff;
            --color-surface:      #f5f7f5;
            --color-text:         #00221c;
            --color-text-secondary: #749670;
            --color-text-light:   rgba(0,34,28,0.65);
            --color-primary:      #018476;
            --color-primary-dark: #00221c;
            --color-primary-hover:#4e7a51;
            --color-secondary:    #dce8dc;
            --color-secondary-hover: #c8d8c8;
            --color-border:       #c8d8c8;
            --color-card-border:  #c8d8c8;
            --color-error:        #c0152f;
            --color-error-bg:     #fef2f2;
            --ns-secondary:       #A5cfe3;
            --ns-dark:            #00221c;
            --font-family-base:   'FKGroteskNeue', 'Geist', 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            --font-family-display:'Playfair Display', Georgia, serif;
            --shadow-sm:  0 1px 3px rgba(0,34,28,0.04), 0 1px 2px rgba(0,34,28,0.02);
            --shadow-md:  0 4px 12px rgba(0,34,28,0.06);
            --shadow-lg:  0 8px 24px rgba(0,34,28,0.10);
            --radius-base: 8px;
            --radius-lg:   12px;
            --duration-fast: 150ms;
            --ease-standard: cubic-bezier(0.16,1,0.3,1);
        }

        *, *::before, *::after { margin:0; padding:0; box-sizing:border-box; }

        html {
            font-family: var(--font-family-base);
            font-size: 14px;
            color: var(--color-text);
            background: var(--color-background);
            -webkit-font-smoothing: antialiased;
            line-height: 1.5;
        }

        body {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            background: var(--color-background);
            color: var(--color-text);
        }

        /* â”€â”€ HEADER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .app-header {
            width: 100%;
            background: linear-gradient(135deg, #00221c 0%, #018476 100%);
            padding: 48px 64px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
        }
        .app-header__content {
            display: flex;
            flex-direction: column;
            align-items: center;
            max-width: 720px;
        }
        .app-header__title {
            font-family: var(--font-family-display);
            font-size: 2.2rem;
            font-weight: 700;
            color: #ffffff;
            margin: 0 0 8px 0;
            line-height: 1.2;
        }
        .app-header__subtitle {
            font-size: 0.92rem;
            color: #A5cfe3;
            margin: 0;
            max-width: 520px;
            line-height: 1.65;
        }

        @media (max-width: 768px) {
            .app-header { padding: 32px 24px; }
            .app-header__title { font-size: 1.6rem; }
        }

        /* â”€â”€ LAYOUT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .main-content-wrap {
            flex: 1;
            padding: 32px 0;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 24px;
        }
        .main-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
            margin-bottom: 24px;
        }
        @media (max-width: 768px) {
            .main-grid { grid-template-columns: 1fr; }
        }

        /* â”€â”€ CARDS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .card {
            background: var(--color-surface);
            border-radius: var(--radius-lg);
            padding: 28px;
            box-shadow: var(--shadow-sm);
            border: 1px solid var(--color-card-border);
            transition: box-shadow var(--duration-fast) var(--ease-standard);
        }
        .card:hover { box-shadow: var(--shadow-md); }

        .card h2 {
            color: var(--color-primary-dark);
            font-size: 1.15rem;
            margin-bottom: 20px;
            padding-bottom: 12px;
            border-bottom: 2px solid var(--color-border);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .card h3 {
            color: var(--color-primary-dark);
            font-size: 1rem;
            margin-bottom: 16px;
        }

        /* â”€â”€ FORMULAIRE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .form-group { margin-bottom: 20px; }
        .form-group label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--color-primary);
            font-size: 0.92rem;
        }
        .form-group input,
        .form-group select {
            width: 100%;
            padding: 10px 14px;
            border: 1px solid var(--color-border);
            border-radius: var(--radius-base);
            font-size: 0.95rem;
            font-family: var(--font-family-base);
            background: var(--color-background);
            color: var(--color-text);
            transition: border-color var(--duration-fast) var(--ease-standard),
                        box-shadow var(--duration-fast) var(--ease-standard);
        }
        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: var(--color-primary);
            box-shadow: 0 0 0 3px rgba(1,132,118,0.2);
        }

        /* â”€â”€ BOUTON â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .btn {
            background: var(--color-primary);
            color: #ffffff;
            border: none;
            padding: 12px 28px;
            border-radius: var(--radius-base);
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            font-family: var(--font-family-base);
            transition: background var(--duration-fast) var(--ease-standard),
                        box-shadow var(--duration-fast) var(--ease-standard);
        }
        .btn:hover {
            background: var(--color-primary-hover);
            box-shadow: var(--shadow-md);
        }

        /* â”€â”€ LISTE INFO â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .info-list { list-style: none; padding: 0; }
        .info-list li {
            margin-bottom: 14px;
            padding-left: 24px;
            position: relative;
            font-size: 0.9rem;
            color: var(--color-text-light);
            line-height: 1.55;
        }
        .info-list li::before {
            content: 'âœ“';
            position: absolute;
            left: 0;
            color: var(--color-primary);
            font-weight: 700;
        }

        /* â”€â”€ RÃ‰SULTATS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .results {
            grid-column: span 2;
            display: none;
        }
        .results.visible { display: block; }
        @media (max-width: 768px) {
            .results { grid-column: span 1; }
        }

        .results-summary {
            background: linear-gradient(135deg, #00221c 0%, #018476 100%);
            color: #ffffff;
            padding: 28px;
            border-radius: var(--radius-lg);
            margin-bottom: 24px;
            text-align: center;
        }
        .total-amount {
            font-family: var(--font-family-display);
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 8px;
            line-height: 1;
        }
        .results-details {
            font-size: 0.95rem;
            color: #A5cfe3;
        }

        /* â”€â”€ TABLEAU DÃ‰TAIL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .breakdown-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 16px;
            background: var(--color-background);
            border-radius: var(--radius-lg);
            overflow: hidden;
            box-shadow: var(--shadow-sm);
            border: 1px solid var(--color-card-border);
        }
        .breakdown-table th,
        .breakdown-table td {
            padding: 12px 16px;
            text-align: left;
            border-bottom: 1px solid var(--color-border);
            font-size: 0.88rem;
        }
        .breakdown-table th {
            background: var(--color-primary-dark);
            color: #ffffff;
            font-weight: 600;
            font-size: 0.78rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        .breakdown-table tbody tr:nth-child(even) td {
            background: var(--color-surface);
        }
        .breakdown-table tbody tr:hover td {
            background: var(--color-secondary);
            transition: background var(--duration-fast) var(--ease-standard);
        }
        .amount {
            font-weight: 600;
            color: var(--color-primary);
        }
        .eligible-badge {
            color: var(--color-primary);
            font-weight: 600;
        }

        /* â”€â”€ ERREUR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .error {
            background: var(--color-error-bg);
            color: var(--color-error);
            padding: 14px 16px;
            border-radius: var(--radius-base);
            margin-top: 16px;
            border-left: 4px solid var(--color-error);
            font-size: 0.9rem;
        }
        .hidden { display: none; }

        /* â”€â”€ DISCLAIMER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .disclaimer-box {
            background: var(--color-surface);
            color: var(--color-text-light);
            padding: 16px 20px;
            border-radius: var(--radius-base);
            margin: 24px 0 8px 0;
            font-size: 0.82rem;
            border: 1px solid var(--color-card-border);
            text-align: center;
            line-height: 1.6;
        }

        /* â”€â”€ FOOTER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .footer {
            background: var(--color-surface);
            text-align: center;
            padding: 20px 0;
            border-top: 1px solid var(--color-border);
            font-size: 0.78rem;
            color: var(--color-text-secondary);
        }
    </style>
</head>
<body>

    <!-- HEADER GRADIENT CENTRÃ‰ -->
    <header class="app-header">
        <div class="app-header__content">
            <h1 class="app-header__title">Calculateur de droits CELI</h1>
            <p class="app-header__subtitle">Estimez vos droits de cotisation cumulatifs Â· Plafonds officiels 2009â€“2026 Â· RÃ©sidents canadiens</p>
        </div>
    </header>

    <div class="main-content-wrap">
        <div class="container">
            <div class="main-grid">

                <!-- Formulaire -->
                <div class="card">
                    <h2>ğŸ“Š Informations personnelles</h2>
                    <form id="celiForm">
                        <div class="form-group">
                            <label for="birthDate">Date de naissance :</label>
                            <input type="date" id="birthDate" name="birthDate">
                        </div>
                        <div class="form-group">
                            <label for="currentYear">AnnÃ©e courante :</label>
                            <input type="number" id="currentYear" name="currentYear" value="2026" min="2009" max="2030">
                        </div>
                        <button type="submit" class="btn" id="calculateBtn">
                            Calculer mes droits CELI
                        </button>
                    </form>
                    <div id="errorMessage" class="error hidden"></div>
                </div>

                <!-- Explication -->
                <div class="card">
                    <h2>â„¹ï¸ Comment Ã§a fonctionne ?</h2>
                    <ul class="info-list">
                        <li>Avoir <strong>18 ans ou plus</strong> au 1er janvier de l'annÃ©e de cotisation</li>
                        <li>ÃŠtre <strong>rÃ©sident canadien</strong> avec un NAS valide</li>
                        <li>Les droits s'accumulent depuis l'annÃ©e de vos 18 ans (min. 2009)</li>
                        <li>Les <strong>retraits</strong> s'ajoutent aux droits de l'annÃ©e suivante</li>
                        <li>Plafond 2026 : <strong>7 000 $</strong> (confirmÃ© ARC)</li>
                    </ul>
                </div>

                <!-- RÃ©sultats (span 2) -->
                <div id="results" class="card results">
                    <div id="resultsSummary" class="results-summary">
                        <div class="total-amount" id="totalAmount">0 $</div>
                        <div class="results-details" id="resultsDetails"></div>
                    </div>
                    <div>
                        <h3>ğŸ“‹ DÃ©tail par annÃ©e</h3>
                        <table class="breakdown-table" id="breakdownTable">
                            <thead>
                                <tr>
                                    <th>AnnÃ©e</th>
                                    <th>Ã‚ge</th>
                                    <th>Plafond de cotisation</th>
                                    <th>Statut</th>
                                </tr>
                            </thead>
                            <tbody id="breakdownBody"></tbody>
                        </table>
                    </div>
                </div>

            </div>

            <div class="disclaimer-box">
                Les droits de cotisation peuvent varier en fonction des retraits effectuÃ©s. Ce calculateur prÃ©sente les droits de cotisation maximaux thÃ©oriques. Consultez Mon Dossier ARC pour connaÃ®tre vos droits rÃ©els.
            </div>
        </div>
    </div>

    <footer class="footer">
        <p>Â© 2026 Â· Calculateur CELI Â· DonnÃ©es basÃ©es sur les plafonds officiels de l'Agence du revenu du Canada</p>
    </footer>

    <script>
        const celiData = {
            2009: 5000, 2010: 5000, 2011: 5000, 2012: 5000, 2013: 5500,
            2014: 5500, 2015: 10000, 2016: 5500, 2017: 5500, 2018: 5500,
            2019: 6000, 2020: 6000, 2021: 6000, 2022: 6000, 2023: 6500,
            2024: 7000, 2025: 7000, 2026: 7000
        };

        const AGE_MINIMUM  = 18;
        const PREMIERE_ANNEE = 2009;

        document.getElementById('celiForm').addEventListener('submit', function(e) {
            e.preventDefault();
            calculateCELI();
        });

        function calculateCELI() {
            const birthDate  = document.getElementById('birthDate').value;
            const currentYear = parseInt(document.getElementById('currentYear').value);
            const errorDiv   = document.getElementById('errorMessage');
            errorDiv.classList.add('hidden');

            if (!birthDate) { showError('Veuillez entrer votre date de naissance.'); return; }
            if (currentYear < PREMIERE_ANNEE || currentYear > 2030) {
                showError("L'annÃ©e courante doit Ãªtre entre 2009 et 2030."); return;
            }

            const birthYear      = new Date(birthDate).getFullYear();
            const currentAge     = currentYear - birthYear;
            const eligibilityYear = birthYear + AGE_MINIMUM;

            if (currentAge < 0 || currentAge > 120) {
                showError("L'Ã¢ge calculÃ© semble incorrect. VÃ©rifiez votre date de naissance."); return;
            }
            if (currentAge < AGE_MINIMUM) {
                showError(`Vous n'Ãªtes pas encore Ã©ligible au CELI. Vous devez avoir au moins ${AGE_MINIMUM} ans.`); return;
            }

            let totalAmount = 0;
            const breakdown = [];
            const startYear = Math.max(eligibilityYear, PREMIERE_ANNEE);

            for (let year = startYear; year <= currentYear; year++) {
                if (celiData[year] !== undefined) {
                    const age    = year - birthYear;
                    const amount = celiData[year];
                    totalAmount += amount;
                    breakdown.push({ year, age, amount, eligible: age >= AGE_MINIMUM });
                }
            }

            displayResults({ totalAmount, eligibilityYear, breakdown, birthYear, currentAge });
        }

        function showError(message) {
            const errorDiv = document.getElementById('errorMessage');
            errorDiv.textContent = message;
            errorDiv.classList.remove('hidden');
        }

        function displayResults({ totalAmount, eligibilityYear, breakdown, currentAge }) {
            document.getElementById('totalAmount').textContent = formatCurrency(totalAmount);

            const n = breakdown.length;
            document.getElementById('resultsDetails').textContent =
                `Droits accumulÃ©s sur ${n} annÃ©e${n > 1 ? 's' : ''} depuis ${eligibilityYear} Â· Ã‚ge actuel : ${currentAge} ans`;

            const tbody = document.getElementById('breakdownBody');
            tbody.innerHTML = '';
            breakdown.forEach(item => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td><strong>${item.year}</strong></td>
                    <td>${item.age} ans</td>
                    <td class="amount">${formatCurrency(item.amount)}</td>
                    <td><span class="eligible-badge">âœ“ Ã‰ligible</span></td>
                `;
                tbody.appendChild(row);
            });

            const resultsEl = document.getElementById('results');
            resultsEl.classList.add('visible');
            resultsEl.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        function formatCurrency(amount) {
            return new Intl.NumberFormat('fr-CA', {
                style: 'currency', currency: 'CAD',
                minimumFractionDigits: 0, maximumFractionDigits: 0
            }).format(amount);
        }
    </script>
</body>
</html>
